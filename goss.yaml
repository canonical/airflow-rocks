command:
  airflow-version:
    exec: "airflow version"
    exit-status: 0
  airflow-help:
    exec: "airflow --help"
    exit-status: 0
  pebble-services:
    exec: "pebble services"
    exit-status: 0
  api-server-running:
    exec: "pgrep -fa 'airflow api_server'"
    exit-status: 0
  scheduler-running:
    exec: "pgrep -fa 'airflow scheduler'"
    exit-status: 0
  dag-processor-running:
    exec: "pgrep -fa 'airflow dag-processor'"
    exit-status: 0
  triggerer-running:
    exec: "pgrep -fa 'airflow triggerer'"
    exit-status: 0
  db-check:
    exec: "airflow db check"
    exit-status: 0
  default-executor-is-local:
    exec: "sh -lc 'e=$(airflow config get-value core executor); [ \"$e\" = \"SequentialExecutor\" ] || [ \"$e\" = \"LocalExecutor\" ]'"
    exit-status: 0
  executor-env-override-accepts-kubernetes:
    exec: "sh -lc '[ \"$(AIRFLOW__CORE__EXECUTOR=KubernetesExecutor airflow config get-value core executor)\" = \"KubernetesExecutor\" ]'"
    exit-status: 0

file:
  /bin/airflow:
    exists: true
  /lib/python3.12/site-packages/airflow:
    exists: true
    filetype: directory
  /var/lib/airflow:
    exists: true
    filetype: directory
  /var/lib/airflow/airflow.cfg:
    exists: true
    filetype: file
  /var/lib/airflow/logs:
    exists: true
    filetype: directory
  /licenses/LICENSE-airflow:
    exists: true
    mode: "0644"
  /licenses/LICENSE-airflow-rock:
    exists: true
    mode: "0644"

http:
  "http://127.0.0.1:8080/api/v2/monitor/health":
    status: 200
    timeout: 5000
    allow-insecure: true